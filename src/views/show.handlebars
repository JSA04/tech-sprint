<div class="container">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10 col-xl-8">
      <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a href="/ideas">Ideias</a></li>
          <li
            class="breadcrumb-item active"
            aria-current="page"
          >{{idea.title}}</li>
        </ol>
      </nav>
      <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
          <h2 class="mb-1">Detalhes da Ideia</h2>
          <small class="text-muted">VocÃª estÃ¡ vendo a pÃ¡gina de detalhes desta
            ideia</small>
        </div>
        <a href="/ideas" class="btn btn-outline-secondary btn-sm">â† Voltar</a>
      </div>

      <div class="card shadow-sm">
        <div class="card-body">
          <div class="d-flex align-items-start justify-content-between mb-2">
            <h3 class="card-title mb-0">{{idea.title}}</h3>
            <div class="d-flex align-items-center gap-2">
              {{#if (eq @root.user.id idea.creator.id)}}
                <span class="badge badge-owned">Criada por vocÃª</span>
              {{/if}}
              <span class="badge text-bg-secondary">{{idea.category.name}}</span>
            </div>
          </div>
          <p>
            {{idea.voteScore}} pontos de votos
            {{#if idea.userAgreed}}
              <span class="text-success fw-normal fs-7">(vocÃª votou a favor)</span>
            {{else if idea.userDisagreed}}
              <span class="text-danger fw-normal fs-7">(vocÃª votou contra)</span>
            {{/if}}
          </p>
          <div class="text-muted mb-3">
            <span class="fs-7">
              Criada por:
              <strong>{{idea.creator.name}}</strong>
              â€¢ em
              {{formatDate idea.createdAt}}
            </span>
          </div>

          <div class="mb-4">
            <h6 class="text-uppercase text-muted fw-semibold">DescriÃ§Ã£o</h6>
            <p class="card-text">{{idea.description}}</p>
          </div>

          <div class="d-flex justify-content-between align-items-end">
            <div class="d-flex flex-wrap gap-2">
              <a href="/ideas" class="btn btn-outline-secondary">Voltar</a>
              {{#if (eq @root.user.id this.idea.creator.id)}}
                <a href="/ideas/{{idea.id}}/edit" class="btn btn-primary">âœï¸ Editar</a>
                <form
                  class="d-inline-block m-0"
                  action="/ideas/{{idea.id}}/delete"
                  method="POST"
                  onsubmit="return confirm('Tem certeza que deseja excluir esta ideia?')"
                >
                  <input type="hidden" name="_csrf" value="{{csrfToken}}" />
                  <button type="submit" class="btn btn-danger">ğŸ—‘ï¸ Excluir</button>
                </form>
              {{/if}}
            </div>

            {{#if (ne @root.user.id this.idea.creator.id)}}
            <div class="d-flex flex-wrap gap-2">
              <form action="/votes" method="POST" class="d-inline m-0">
                <input type="hidden" name="_csrf" value="{{csrfToken}}">
                <input type="hidden" name="ideaId" value="{{idea.id}}">
                <input type="hidden" name="voteType" value="agree">
                  <button type="submit" class="btn btn-success" {{#if idea.userAgreed}}disabled{{/if}}>ğŸ‘ A favor</button>
              </form>

              <form action="/votes" method="POST" class="d-inline m-0">
                <input type="hidden" name="_csrf" value="{{csrfToken}}">
                <input type="hidden" name="ideaId" value="{{idea.id}}">
                <input type="hidden" name="voteType" value="disagree">
                  <button type="submit" class="btn btn-danger" {{#if idea.userDisagreed}}disabled{{/if}}>ğŸ‘ Contra</button>
              </form>

              {{#if (or idea.userAgreed idea.userDisagreed)}}
                <form action="/votes/clear" method="POST" class="d-inline m-0">
                  <input type="hidden" name="_csrf" value="{{csrfToken}}">
                  <input type="hidden" name="ideaId" value="{{idea.id}}">
                  <button type="submit" class="btn btn-primary">ğŸ”„ Limpar voto</button>
                </form>
              {{/if}}
            </div>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>